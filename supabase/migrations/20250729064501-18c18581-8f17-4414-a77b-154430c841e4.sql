
-- First, let's add the missing columns to the countries table
ALTER TABLE public.countries 
ADD COLUMN IF NOT EXISTS iso2_code VARCHAR(2),
ADD COLUMN IF NOT EXISTS iso3_code VARCHAR(3),
ADD COLUMN IF NOT EXISTS continent TEXT,
ADD COLUMN IF NOT EXISTS region TEXT,
ADD COLUMN IF NOT EXISTS population BIGINT,
ADD COLUMN IF NOT EXISTS area_sq_km NUMERIC;

-- Update the existing code column to be iso2_code for consistency
UPDATE public.countries SET iso2_code = code WHERE iso2_code IS NULL;

-- Clear existing data to avoid conflicts
TRUNCATE TABLE public.countries RESTART IDENTITY CASCADE;

-- Insert all countries with comprehensive data
INSERT INTO public.countries (name, iso2_code, iso3_code, continent, region, population, area_sq_km) VALUES
('Afghanistan', 'AF', 'AFG', 'Asia', 'Southern Asia', 38928346, 652230),
('Albania', 'AL', 'ALB', 'Europe', 'Southern Europe', 2877797, 28748),
('Algeria', 'DZ', 'DZA', 'Africa', 'Northern Africa', 43851044, 2381741),
('Andorra', 'AD', 'AND', 'Europe', 'Southern Europe', 77265, 468),
('Angola', 'AO', 'AGO', 'Africa', 'Middle Africa', 32866272, 1246700),
('Antigua and Barbuda', 'AG', 'ATG', 'North America', 'Caribbean', 97929, 442),
('Argentina', 'AR', 'ARG', 'South America', 'South America', 45195774, 2780400),
('Armenia', 'AM', 'ARM', 'Asia', 'Western Asia', 2963243, 29743),
('Australia', 'AU', 'AUS', 'Oceania', 'Australia and New Zealand', 25499884, 7741220),
('Austria', 'AT', 'AUT', 'Europe', 'Western Europe', 9006398, 83871),
('Azerbaijan', 'AZ', 'AZE', 'Asia', 'Western Asia', 10139177, 86600),
('Bahamas', 'BS', 'BHS', 'North America', 'Caribbean', 393244, 13880),
('Bahrain', 'BH', 'BHR', 'Asia', 'Western Asia', 1701583, 785),
('Bangladesh', 'BD', 'BGD', 'Asia', 'Southern Asia', 164689383, 147570),
('Barbados', 'BB', 'BRB', 'North America', 'Caribbean', 287371, 430),
('Belarus', 'BY', 'BLR', 'Europe', 'Eastern Europe', 9449323, 207600),
('Belgium', 'BE', 'BEL', 'Europe', 'Western Europe', 11589623, 30528),
('Belize', 'BZ', 'BLZ', 'North America', 'Central America', 397628, 22966),
('Benin', 'BJ', 'BEN', 'Africa', 'Western Africa', 12123200, 112622),
('Bhutan', 'BT', 'BTN', 'Asia', 'Southern Asia', 771612, 38394),
('Bolivia', 'BO', 'BOL', 'South America', 'South America', 11673021, 1098581),
('Bosnia and Herzegovina', 'BA', 'BIH', 'Europe', 'Southern Europe', 3280819, 51197),
('Botswana', 'BW', 'BWA', 'Africa', 'Southern Africa', 2351627, 581730),
('Brazil', 'BR', 'BRA', 'South America', 'South America', 212559417, 8515767),
('Brunei', 'BN', 'BRN', 'Asia', 'South-Eastern Asia', 437479, 5765),
('Bulgaria', 'BG', 'BGR', 'Europe', 'Eastern Europe', 6948445, 110879),
('Burkina Faso', 'BF', 'BFA', 'Africa', 'Western Africa', 20903273, 274200),
('Burundi', 'BI', 'BDI', 'Africa', 'Eastern Africa', 11890784, 27830),
('Cabo Verde', 'CV', 'CPV', 'Africa', 'Western Africa', 555987, 4033),
('Cambodia', 'KH', 'KHM', 'Asia', 'South-Eastern Asia', 16718965, 181035),
('Cameroon', 'CM', 'CMR', 'Africa', 'Middle Africa', 26545863, 475440),
('Canada', 'CA', 'CAN', 'North America', 'Northern America', 37742154, 9984670),
('Central African Republic', 'CF', 'CAF', 'Africa', 'Middle Africa', 4829767, 622984),
('Chad', 'TD', 'TCD', 'Africa', 'Middle Africa', 16425864, 1284000),
('Chile', 'CL', 'CHL', 'South America', 'South America', 19116201, 756102),
('China', 'CN', 'CHN', 'Asia', 'Eastern Asia', 1439323776, 9596961),
('Colombia', 'CO', 'COL', 'South America', 'South America', 50882891, 1141748),
('Comoros', 'KM', 'COM', 'Africa', 'Eastern Africa', 869595, 1861),
('Congo', 'CG', 'COG', 'Africa', 'Middle Africa', 5518087, 342000),
('Costa Rica', 'CR', 'CRI', 'North America', 'Central America', 5094118, 51100),
('Croatia', 'HR', 'HRV', 'Europe', 'Southern Europe', 4047200, 56594),
('Cuba', 'CU', 'CUB', 'North America', 'Caribbean', 11326616, 109884),
('Cyprus', 'CY', 'CYP', 'Europe', 'Southern Europe', 1207359, 9251),
('Czech Republic', 'CZ', 'CZE', 'Europe', 'Eastern Europe', 10708981, 78867),
('Democratic Republic of the Congo', 'CD', 'COD', 'Africa', 'Middle Africa', 89561403, 2344858),
('Denmark', 'DK', 'DNK', 'Europe', 'Northern Europe', 5792202, 43094),
('Djibouti', 'DJ', 'DJI', 'Africa', 'Eastern Africa', 988000, 23200),
('Dominica', 'DM', 'DMA', 'North America', 'Caribbean', 71986, 751),
('Dominican Republic', 'DO', 'DOM', 'North America', 'Caribbean', 10847904, 48670),
('Ecuador', 'EC', 'ECU', 'South America', 'South America', 17643054, 256369),
('Egypt', 'EG', 'EGY', 'Africa', 'Northern Africa', 102334404, 1001450),
('El Salvador', 'SV', 'SLV', 'North America', 'Central America', 6486205, 21041),
('Equatorial Guinea', 'GQ', 'GNQ', 'Africa', 'Middle Africa', 1402985, 28051),
('Eritrea', 'ER', 'ERI', 'Africa', 'Eastern Africa', 3546421, 117600),
('Estonia', 'EE', 'EST', 'Europe', 'Northern Europe', 1326535, 45228),
('Eswatini', 'SZ', 'SWZ', 'Africa', 'Southern Africa', 1160164, 17364),
('Ethiopia', 'ET', 'ETH', 'Africa', 'Eastern Africa', 114963588, 1104300),
('Fiji', 'FJ', 'FJI', 'Oceania', 'Melanesia', 896445, 18274),
('Finland', 'FI', 'FIN', 'Europe', 'Northern Europe', 5540720, 338145),
('France', 'FR', 'FRA', 'Europe', 'Western Europe', 67391582, 643801),
('Gabon', 'GA', 'GAB', 'Africa', 'Middle Africa', 2225734, 267667),
('Gambia', 'GM', 'GMB', 'Africa', 'Western Africa', 2416668, 10689),
('Georgia', 'GE', 'GEO', 'Asia', 'Western Asia', 3989167, 69700),
('Germany', 'DE', 'DEU', 'Europe', 'Western Europe', 83783942, 357022),
('Ghana', 'GH', 'GHA', 'Africa', 'Western Africa', 31072940, 238533),
('Greece', 'GR', 'GRC', 'Europe', 'Southern Europe', 10715549, 131957),
('Grenada', 'GD', 'GRD', 'North America', 'Caribbean', 112519, 344),
('Guatemala', 'GT', 'GTM', 'North America', 'Central America', 17915568, 108889),
('Guinea', 'GN', 'GIN', 'Africa', 'Western Africa', 13132795, 245857),
('Guinea-Bissau', 'GW', 'GNB', 'Africa', 'Western Africa', 1968001, 36125),
('Guyana', 'GY', 'GUY', 'South America', 'South America', 786552, 214969),
('Haiti', 'HT', 'HTI', 'North America', 'Caribbean', 11402528, 27750),
('Honduras', 'HN', 'HND', 'North America', 'Central America', 9904607, 112492),
('Hungary', 'HU', 'HUN', 'Europe', 'Eastern Europe', 9660351, 93028),
('Iceland', 'IS', 'ISL', 'Europe', 'Northern Europe', 361313, 103000),
('India', 'IN', 'IND', 'Asia', 'Southern Asia', 1380004385, 3287263),
('Indonesia', 'ID', 'IDN', 'Asia', 'South-Eastern Asia', 273523615, 1904569),
('Iran', 'IR', 'IRN', 'Asia', 'Southern Asia', 83992949, 1648195),
('Iraq', 'IQ', 'IRQ', 'Asia', 'Western Asia', 40222493, 438317),
('Ireland', 'IE', 'IRL', 'Europe', 'Northern Europe', 4941444, 70273),
('Israel', 'IL', 'ISR', 'Asia', 'Western Asia', 9213554, 22072),
('Italy', 'IT', 'ITA', 'Europe', 'Southern Europe', 60461826, 301340),
('Ivory Coast', 'CI', 'CIV', 'Africa', 'Western Africa', 26378274, 322463),
('Jamaica', 'JM', 'JAM', 'North America', 'Caribbean', 2961167, 10991),
('Japan', 'JP', 'JPN', 'Asia', 'Eastern Asia', 126476461, 377915),
('Jordan', 'JO', 'JOR', 'Asia', 'Western Asia', 10203134, 89342),
('Kazakhstan', 'KZ', 'KAZ', 'Asia', 'Central Asia', 18776707, 2724900),
('Kenya', 'KE', 'KEN', 'Africa', 'Eastern Africa', 53771296, 580367),
('Kiribati', 'KI', 'KIR', 'Oceania', 'Micronesia', 119446, 811),
('Kosovo', 'XK', 'XKX', 'Europe', 'Southern Europe', 1798506, 10887),
('Kuwait', 'KW', 'KWT', 'Asia', 'Western Asia', 4270571, 17818),
('Kyrgyzstan', 'KG', 'KGZ', 'Asia', 'Central Asia', 6524195, 199951),
('Laos', 'LA', 'LAO', 'Asia', 'South-Eastern Asia', 7275560, 236800),
('Latvia', 'LV', 'LVA', 'Europe', 'Northern Europe', 1886198, 64589),
('Lebanon', 'LB', 'LBN', 'Asia', 'Western Asia', 6825445, 10452),
('Lesotho', 'LS', 'LSO', 'Africa', 'Southern Africa', 2142249, 30355),
('Liberia', 'LR', 'LBR', 'Africa', 'Western Africa', 5057681, 111369),
('Libya', 'LY', 'LBY', 'Africa', 'Northern Africa', 6871000, 1759540),
('Liechtenstein', 'LI', 'LIE', 'Europe', 'Western Europe', 38128, 160),
('Lithuania', 'LT', 'LTU', 'Europe', 'Northern Europe', 2722289, 65300),
('Luxembourg', 'LU', 'LUX', 'Europe', 'Western Europe', 625978, 2586),
('Madagascar', 'MG', 'MDG', 'Africa', 'Eastern Africa', 27534354, 587041),
('Malawi', 'MW', 'MWI', 'Africa', 'Eastern Africa', 19129952, 118484),
('Malaysia', 'MY', 'MYS', 'Asia', 'South-Eastern Asia', 32365999, 329847),
('Maldives', 'MV', 'MDV', 'Asia', 'Southern Asia', 540544, 300),
('Mali', 'ML', 'MLI', 'Africa', 'Western Africa', 20250833, 1240192),
('Malta', 'MT', 'MLT', 'Europe', 'Southern Europe', 441543, 316),
('Marshall Islands', 'MH', 'MHL', 'Oceania', 'Micronesia', 59190, 181),
('Mauritania', 'MR', 'MRT', 'Africa', 'Western Africa', 4649658, 1030700),
('Mauritius', 'MU', 'MUS', 'Africa', 'Eastern Africa', 1271768, 2040),
('Mexico', 'MX', 'MEX', 'North America', 'Central America', 128932753, 1964375),
('Micronesia', 'FM', 'FSM', 'Oceania', 'Micronesia', 115021, 702),
('Moldova', 'MD', 'MDA', 'Europe', 'Eastern Europe', 4033963, 33851),
('Monaco', 'MC', 'MCO', 'Europe', 'Western Europe', 39242, 2),
('Mongolia', 'MN', 'MNG', 'Asia', 'Eastern Asia', 3278290, 1564116),
('Montenegro', 'ME', 'MNE', 'Europe', 'Southern Europe', 621718, 13812),
('Morocco', 'MA', 'MAR', 'Africa', 'Northern Africa', 36910560, 446550),
('Mozambique', 'MZ', 'MOZ', 'Africa', 'Eastern Africa', 31255435, 799380),
('Myanmar', 'MM', 'MMR', 'Asia', 'South-Eastern Asia', 54409800, 676578),
('Namibia', 'NA', 'NAM', 'Africa', 'Southern Africa', 2540905, 824292),
('Nauru', 'NR', 'NRU', 'Oceania', 'Micronesia', 10824, 21),
('Nepal', 'NP', 'NPL', 'Asia', 'Southern Asia', 29136808, 147181),
('Netherlands', 'NL', 'NLD', 'Europe', 'Western Europe', 17134872, 41543),
('New Zealand', 'NZ', 'NZL', 'Oceania', 'Australia and New Zealand', 5084300, 270467),
('Nicaragua', 'NI', 'NIC', 'North America', 'Central America', 6624554, 130373),
('Niger', 'NE', 'NER', 'Africa', 'Western Africa', 24206644, 1267000),
('Nigeria', 'NG', 'NGA', 'Africa', 'Western Africa', 206139589, 923768),
('North Korea', 'KP', 'PRK', 'Asia', 'Eastern Asia', 25778816, 120538),
('North Macedonia', 'MK', 'MKD', 'Europe', 'Southern Europe', 2083374, 25713),
('Norway', 'NO', 'NOR', 'Europe', 'Northern Europe', 5421241, 323802),
('Oman', 'OM', 'OMN', 'Asia', 'Western Asia', 5106626, 309500),
('Pakistan', 'PK', 'PAK', 'Asia', 'Southern Asia', 220892340, 881912),
('Palau', 'PW', 'PLW', 'Oceania', 'Micronesia', 18094, 459),
('Palestine', 'PS', 'PSE', 'Asia', 'Western Asia', 5101414, 6020),
('Panama', 'PA', 'PAN', 'North America', 'Central America', 4314767, 75420),
('Papua New Guinea', 'PG', 'PNG', 'Oceania', 'Melanesia', 8947024, 462840),
('Paraguay', 'PY', 'PRY', 'South America', 'South America', 7132538, 406752),
('Peru', 'PE', 'PER', 'South America', 'South America', 32971854, 1285216),
('Philippines', 'PH', 'PHL', 'Asia', 'South-Eastern Asia', 109581078, 300000),
('Poland', 'PL', 'POL', 'Europe', 'Eastern Europe', 37846611, 312696),
('Portugal', 'PT', 'PRT', 'Europe', 'Southern Europe', 10196709, 92090),
('Qatar', 'QA', 'QAT', 'Asia', 'Western Asia', 2881053, 11586),
('Romania', 'RO', 'ROU', 'Europe', 'Eastern Europe', 19237691, 238397),
('Russia', 'RU', 'RUS', 'Europe', 'Eastern Europe', 145934462, 17098242),
('Rwanda', 'RW', 'RWA', 'Africa', 'Eastern Africa', 12952217, 26338),
('Saint Kitts and Nevis', 'KN', 'KNA', 'North America', 'Caribbean', 53199, 261),
('Saint Lucia', 'LC', 'LCA', 'North America', 'Caribbean', 183629, 616),
('Saint Vincent and the Grenadines', 'VC', 'VCT', 'North America', 'Caribbean', 110947, 389),
('Samoa', 'WS', 'WSM', 'Oceania', 'Polynesia', 198410, 2842),
('San Marino', 'SM', 'SMR', 'Europe', 'Southern Europe', 33931, 61),
('Sao Tome and Principe', 'ST', 'STP', 'Africa', 'Middle Africa', 219159, 964),
('Saudi Arabia', 'SA', 'SAU', 'Asia', 'Western Asia', 34813871, 2149690),
('Senegal', 'SN', 'SEN', 'Africa', 'Western Africa', 16743927, 196722),
('Serbia', 'RS', 'SRB', 'Europe', 'Southern Europe', 6804596, 77474),
('Seychelles', 'SC', 'SYC', 'Africa', 'Eastern Africa', 98340, 452),
('Sierra Leone', 'SL', 'SLE', 'Africa', 'Western Africa', 7976983, 71740),
('Singapore', 'SG', 'SGP', 'Asia', 'South-Eastern Asia', 5685807, 728),
('Slovakia', 'SK', 'SVK', 'Europe', 'Eastern Europe', 5459642, 49035),
('Slovenia', 'SI', 'SVN', 'Europe', 'Southern Europe', 2078938, 20273),
('Solomon Islands', 'SB', 'SLB', 'Oceania', 'Melanesia', 686884, 28896),
('Somalia', 'SO', 'SOM', 'Africa', 'Eastern Africa', 15893222, 637657),
('South Africa', 'ZA', 'ZAF', 'Africa', 'Southern Africa', 59308690, 1219090),
('South Korea', 'KR', 'KOR', 'Asia', 'Eastern Asia', 51269185, 100210),
('South Sudan', 'SS', 'SSD', 'Africa', 'Eastern Africa', 11193725, 644329),
('Spain', 'ES', 'ESP', 'Europe', 'Southern Europe', 46754778, 505370),
('Sri Lanka', 'LK', 'LKA', 'Asia', 'Southern Asia', 21919000, 65610),
('Sudan', 'SD', 'SDN', 'Africa', 'Northern Africa', 43849260, 1861484),
('Suriname', 'SR', 'SUR', 'South America', 'South America', 586634, 163820),
('Sweden', 'SE', 'SWE', 'Europe', 'Northern Europe', 10099265, 450295),
('Switzerland', 'CH', 'CHE', 'Europe', 'Western Europe', 8654622, 41285),
('Syria', 'SY', 'SYR', 'Asia', 'Western Asia', 17500658, 185180),
('Taiwan', 'TW', 'TWN', 'Asia', 'Eastern Asia', 23816775, 36193),
('Tajikistan', 'TJ', 'TJK', 'Asia', 'Central Asia', 9537642, 143100),
('Tanzania', 'TZ', 'TZA', 'Africa', 'Eastern Africa', 59734218, 947303),
('Thailand', 'TH', 'THA', 'Asia', 'South-Eastern Asia', 69799978, 513120),
('Timor-Leste', 'TL', 'TLS', 'Asia', 'South-Eastern Asia', 1318445, 14874),
('Togo', 'TG', 'TGO', 'Africa', 'Western Africa', 8278724, 56785),
('Tonga', 'TO', 'TON', 'Oceania', 'Polynesia', 105695, 747),
('Trinidad and Tobago', 'TT', 'TTO', 'North America', 'Caribbean', 1399488, 5130),
('Tunisia', 'TN', 'TUN', 'Africa', 'Northern Africa', 11818619, 163610),
('Turkey', 'TR', 'TUR', 'Asia', 'Western Asia', 84339067, 783562),
('Turkmenistan', 'TM', 'TKM', 'Asia', 'Central Asia', 6031187, 488100),
('Tuvalu', 'TV', 'TUV', 'Oceania', 'Polynesia', 11792, 26),
('Uganda', 'UG', 'UGA', 'Africa', 'Eastern Africa', 45741007, 241038),
('Ukraine', 'UA', 'UKR', 'Europe', 'Eastern Europe', 43733762, 603550),
('United Arab Emirates', 'AE', 'ARE', 'Asia', 'Western Asia', 9890402, 83600),
('United Kingdom', 'GB', 'GBR', 'Europe', 'Northern Europe', 67886011, 243610),
('United States', 'US', 'USA', 'North America', 'Northern America', 331002651, 9833517),
('Uruguay', 'UY', 'URY', 'South America', 'South America', 3473730, 176215),
('Uzbekistan', 'UZ', 'UZB', 'Asia', 'Central Asia', 33469203, 447400),
('Vanuatu', 'VU', 'VUT', 'Oceania', 'Melanesia', 307145, 12189),
('Vatican City', 'VA', 'VAT', 'Europe', 'Southern Europe', 825, 0.44),
('Venezuela', 'VE', 'VEN', 'South America', 'South America', 28435940, 916445),
('Vietnam', 'VN', 'VNM', 'Asia', 'South-Eastern Asia', 97338579, 331212),
('Yemen', 'YE', 'YEM', 'Asia', 'Western Asia', 29825964, 527968),
('Zambia', 'ZM', 'ZMB', 'Africa', 'Eastern Africa', 18383956, 752612),
('Zimbabwe', 'ZW', 'ZWE', 'Africa', 'Eastern Africa', 14645473, 390757);

-- Create indexes for better performance
CREATE INDEX IF NOT EXISTS idx_countries_iso2_code ON public.countries(iso2_code);
CREATE INDEX IF NOT EXISTS idx_countries_iso3_code ON public.countries(iso3_code);
CREATE INDEX IF NOT EXISTS idx_countries_continent ON public.countries(continent);
CREATE INDEX IF NOT EXISTS idx_countries_region ON public.countries(region);

-- Update the existing code column to match iso2_code
UPDATE public.countries SET code = iso2_code WHERE code IS NULL OR code = '';
